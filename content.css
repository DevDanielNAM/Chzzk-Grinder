/* CSS 색상 변수 정의 */
:root {
  /* 기본(라이트 모드) 색상 */
  --btn-blocked-bg: #f500002e; /* 라이트 모드 배경색 */
  --btn-blocked-text: #e02020;
}

/* 다크 모드 감지 */
html[data-theme="dark"],
@media (prefers-color-scheme: dark) {
  :root {
    --btn-blocked-bg: #711e1e; /* 다크 모드 배경색 */
    --btn-blocked-text: #e02020;
  }
}

/* 블러 처리된 콘텐츠 */
.chzzk-blur-content {
  filter: blur(6px);
  user-select: none;
  cursor: pointer;
  transition: filter 0.2s;
}
.chzzk-blur-content:hover {
  filter: blur(3px);
}

/* 버튼 컨테이너 */
.chzzk-btn-group {
  display: inline-flex;
  align-items: center;
  margin-left: 6px;
  vertical-align: middle;
  gap: 2px;
}

/* 클립(Clip) 페이지 전용 스타일 */
div[class*="vod_comment_container"] span[class*="name_show_tooltip"] {
  display: inline-flex;
  align-items: center;
}
.chzzk-btn-group.chzzk-clip-mode {
  width: 100%;
  justify-content: flex-end;
  padding: 12px 18px 5px 0px;
  margin: 0;
  font-weight: 600;
}
.chzzk-btn-group.chzzk-clip-mode:has(.chzzk-collect-btn.is-captured) {
  padding: 12px 0px 5px;
  font-weight: normal;
}
.chzzk-btn-group.chzzk-clip-mode:has(.chzzk-collect-btn.is-captured)
  .chzzk-block-btn
  .chzzk-tooltip-text {
  left: 10%;
}
.chzzk-btn-group.chzzk-clip-mode:has(.chzzk-collect-btn.is-captured)
  .chzzk-block-btn.is-blocked
  .chzzk-tooltip-text {
  left: -15%;
}
[class*="comment_item_is_replied"] .chzzk-btn-group.chzzk-clip-mode {
  padding: 12px 0px 5px;
  margin-left: -18px;
}
[class*="comment_item_is_replied"]
  .chzzk-btn-group.chzzk-clip-mode:has(.chzzk-collect-btn.is-captured) {
  width: 111%;
  padding: 12px 0px 5px;
  margin-left: -40px;
  font-weight: normal;
}
[class*="comment_item_is_replied"]
  .chzzk-btn-group.chzzk-clip-mode:has(.chzzk-collect-btn.is-captured)
  .chzzk-block-btn
  .chzzk-tooltip-text {
  left: 10%;
}
[class*="comment_item_is_replied"]
  .chzzk-btn-group.chzzk-clip-mode:has(.chzzk-collect-btn.is-captured)
  .chzzk-block-btn.is-blocked
  .chzzk-tooltip-text {
  left: -15%;
}

/* 공통 버튼 스타일 */
.chzzk-action-btn {
  font-size: 10px;
  cursor: pointer;
  padding: 2px 5px;
  border-radius: 4px;
  border: 1px solid transparent;
  line-height: 1.2;
  font-family: sans-serif;
  transition: all 0.1s;
  position: relative;
  display: inline-flex;
}

/* 1) 복사 버튼, 캡처 버튼 (회색) */
.chzzk-copy-btn,
.chzzk-capture-btn {
  background-color: var(--Surface-Neutral-Base, rgba(0, 0, 0, 0.05));
  color: var(--Content-Neutral-Cool-Strong, #888);
}
.chzzk-copy-btn:hover,
.chzzk-capture-btn:hover {
  background-color: var(--Surface-Neutral-Strong, rgba(0, 0, 0, 0.1));
  color: var(--Content-Neutral-Cool-Stronger, #555);
}

/* 2) 차단 버튼 (기본) */
.chzzk-block-btn {
  color: #53b28a;
  background-color: var(--color-bg-chzzk-06);
}
.chzzk-block-btn:hover {
  background-color: var(--btn-blocked-bg);
  color: var(--btn-blocked-text);
  font-weight: bold;
}

/* 2-1) 차단 활성화 상태 (붉은색) */
.chzzk-block-btn.is-blocked {
  background-color: var(--btn-blocked-bg);
  color: var(--btn-blocked-text);
  font-weight: bold;
}

/* 수집 버튼 (기본 회색) */
.chzzk-collect-btn {
  background-color: var(--Surface-Neutral-Base, rgba(0, 0, 0, 0.05));
  color: var(--Content-Neutral-Cool-Strong, #888);
}
.chzzk-collect-btn:hover {
  background-color: var(--Surface-Neutral-Strong, rgba(0, 0, 0, 0.1));
  color: var(--Content-Neutral-Cool-Stronger, #555);
}

/* 수집 완료된 상태 (녹색) */
.chzzk-collect-btn.is-captured {
  background-color: #e8f5e9;
  color: #2e7d32;
  font-weight: bold;
}

/* 커스텀 툴팁 */
.chzzk-tooltip-text {
  visibility: hidden;
  width: max-content;
  min-width: 60px;
  max-width: 220px;
  background-color: var(--Surface-Neutral-Base, #333);
  color: var(--Content-Neutral-Cool-Stronger, #fff);
  box-shadow: 0 2px 8px 0 var(--color-shadow-layer04-02, rgba(0, 0, 0, 0.2)),
    0 0 2px 0 var(--color-shadow-layer04-01, rgba(0, 0, 0, 0.1));
  text-align: center;
  padding: 6px 8px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 400;
  white-space: normal;
  line-height: 1.4;

  /* 위치 설정 */
  position: absolute;
  z-index: 9999;
  left: 50%;
  bottom: 130%;
  transform: translateX(-50%); /* 가로 중앙 정렬 */

  /* 효과 */
  opacity: 0;
  transition: opacity 0.2s;
  pointer-events: none;
}

/* 호버 시 표시 */
.chzzk-action-btn:hover .chzzk-tooltip-text {
  visibility: visible;
  opacity: 1;
}
.chzzk-blur-content:hover + .chzzk-tooltip-text {
  visibility: visible;
  opacity: 1;
}

/* 캡처 완료된 버튼 스타일 */
.chzzk-capture-btn.is-captured {
  background-color: #e8f5e9; /* 연한 녹색 배경 */
  color: #2e7d32;
  font-weight: bold;
}

/* 차단 목록 리스트 아이템 */
.chzzk-block-item {
  background-color: var(--Surface-Neutral-Weaker);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 8px;
  border: 1px solid rgba(var(--color-border-01-rgb), 0.06);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  position: relative;
  cursor: pointer;
  transition: background-color 0.2s ease-in;
}
.chzzk-block-item:hover {
  background-color: var(--Surface-Neutral-Weakest);
}
.chzzk-block-item:hover .chzzk-tooltip-text {
  visibility: visible;
  opacity: 1;
}
.chzzk-block-item .chzzk-tooltip-text {
  bottom: auto;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  z-index: 10;
  width: auto;
  white-space: nowrap;
}
.chzzk-block-info {
  flex: 1;
  font-size: 13px;
  overflow: hidden;
}
.chzzk-block-info .chzzk-chat-block-nickname {
  font-weight: bold;
}
.chzzk-block-info .chzzk-chat-block-uid {
  font-size: 11px;
  color: var(--Content-Neutral-Cool-Weak);
  margin-top: 2px;
}
.chzzk-block-info .meta {
  font-size: 11px;
  margin-bottom: 4px;
}
.chzzk-block-info .content {
  font-size: 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding: 4px 8px;
  border-radius: 4px;
  margin-top: 4px;
}
.chzzk-unblock-btn {
  padding: 6px 10px;
  background-color: var(--btn-blocked-bg);
  color: var(--btn-blocked-text);
  border-radius: 4px;
  font-size: 11px;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.2s ease-in;
}
.chzzk-unblock-btn:hover {
  color: rgb(83, 178, 138);
  background-color: var(--color-bg-chzzk-06);
}
.chzzk-modal-footer .chzzk-csv-btn {
  background-color: #2ecc71bf;
  transition: background-color 0.2s ease-in;
}
.chzzk-modal-footer .chzzk-csv-btn:hover {
  background-color: #2ecc71;
}

/* PDF 생성 모달 스타일 */
.chzzk-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 100000;
  display: flex;
  justify-content: center;
  align-items: center;
}
.chzzk-modal-content {
  background-color: var(--Surface-Neutral-Weaker);
  color: var(--Content-Neutral-Cool-Stronger);
  width: 600px;
  max-height: 80vh;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  font-family: sans-serif;
}
.chzzk-empty-msg {
  text-align: center;
  padding: 20px;
  color: var(--Content-Neutral-Cool-Weak);
}
#chzzk-chat-block-modal .chzzk-modal-content {
  max-width: 400px;
  height: 500px;
}
#chzzk-chat-block-modal #chzzk-chat-block-count {
  color: #e74c3c;
  font-size: 0.9em;
  margin-left: 5px;
}
.chzzk-modal-header {
  padding: 15px 20px;
  border-bottom: 1px solid rgba(var(--color-border-01-rgb), 0.06);
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.chzzk-sort-select {
  padding: 4px 8px;
  border: 1px solid rgba(var(--color-border-01-rgb), 0.06);
  border-radius: 4px;
  font-size: 12px;
  background-color: var(--Surface-Neutral-Weaker);
  color: var(--Content-Neutral-Cool-Stronger);
  cursor: pointer;
}
.chzzk-sort-select:focus {
  outline: none;
  border-color: 1px solid rgba(var(--color-border-01-rgb), 0.06);
}
.chzzk-modal-header-controls {
  display: flex;
  align-items: center;
  gap: 8px;
}
.chzzk-modal-title {
  font-weight: bold;
  font-size: 16px;
}
.chzzk-modal-close {
  cursor: pointer;
  color: var(--color-content-04);
}
.chzzk-modal-close:hover {
  color: var(--color-content-02);
}
.chzzk-modal-close:hover svg {
  background-color: var(--color-bg-overlay-03);
  border-radius: 6px;
}
.chzzk-modal-body {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  background-color: var(--Surface-Neutral-Weak);
}
/* 상단 컨트롤 바 (전체선택 + 전체삭제) */
.chzzk-modal-controls {
  display: flex;
  justify-content: space-between; /* 양끝 정렬 */
  align-items: center;
  padding: 0 5px 10px 5px;
  border-bottom: 1px solid #eee; /* 구분선 추가 */
  margin-bottom: 10px;
}

/* 전체 삭제 버튼 */
.chzzk-delete-all-text-btn {
  background: none;
  border: none;
  color: #e74c3c; /* 빨간색 */
  font-size: 12px;
  font-weight: bold;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: background-color 0.2s;
}

.chzzk-delete-all-text-btn:hover {
  background-color: rgba(231, 76, 60, 0.1);
}
.chzzk-capture-item {
  background-color: var(--Surface-Neutral-Weaker);
  border-radius: 8px;
  padding: 10px;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  border: 1px solid rgba(var(--color-border-01-rgb), 0.06);
  cursor: pointer;
  transition: background-color 0.2s;
}
.chzzk-capture-item:hover {
  background-color: var(--Surface-Neutral-Weakest);
}
/* 모달 내 삭제 버튼 스타일 */
.chzzk-item-delete-btn {
  margin-left: auto;
  border: none;
  background: none;
  font-size: 8px;
  cursor: pointer;
  color: #adb5bd;
  padding: 5px;
  border-radius: 4px;
  transition: all 0.2s;
}
.chzzk-item-delete-btn:hover {
  color: #e74c3c;
  background-color: rgba(231, 76, 60, 0.1);
}
.chzzk-capture-thumb {
  width: 80px;
  height: 60px;
  object-fit: contain;
  border: 1px solid #ddd;
  border-radius: 4px;
  background: #fafafa;
}
.chzzk-capture-info {
  flex: 1;
  font-size: 12px;
}
.chzzk-capture-info div {
  font-weight: bold;
  font-size: 13px;
  margin-bottom: 3px;
}
.chzzk-capture-info strong {
  display: block;
  font-size: 13px;
  margin-bottom: 2px;
}
.chzzk-capture-info span {
  display: block;
  margin-top: 3px;
  font-size: 10px;
}
.chzzk-modal-footer {
  padding: 15px;
  border-top: 1px solid rgba(var(--color-border-01-rgb), 0.06);
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

.chzzk-btn {
  padding: 8px 16px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  font-weight: bold;
  font-size: 13px;
}
.chzzk-btn-primary {
  background: #e74d3cb3;
  color: white;
  transition: background 0.2s ease-in;
}
.chzzk-btn-secondary {
  background: #95a5a6b3;
  color: white;
  transition: background 0.2s ease-in;
}
.chzzk-btn-primary:hover {
  background: #e74d3c;
  color: white;
}
.chzzk-btn-secondary:hover {
  background: #95a5a6;
  color: white;
}

#chzzk-export-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 99999;
  display: flex;
  gap: 5px;
  flex-direction: column;
  align-items: flex-end;
}
/* video에서 플레이어가 화면에 보일 때 export 버튼 숨김 */
#chzzk-export-container.chzzk-export-hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateY(6px);
}
/* Clip 페이지일 때 왼쪽 하단으로 이동 */
#chzzk-export-container.is-clip-mode {
  right: auto;
  left: 20px;
  align-items: flex-start;
}
.chzzk-export-btn {
  padding: 8px 12px;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  font-size: 12px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  backdrop-filter: blur(1px);
}
#chzzk-csv-btn {
  background-color: #2ecc71bf;
  transition: background-color 0.2s ease-in;
}
#chzzk-pdf-btn {
  background-color: #e74c3cbf;
  transition: background-color 0.2s ease-in;
}
#chzzk-clear-btn {
  background-color: #95a5a6bf;
  transition: background-color 0.2s ease-in;
}
#chzzk-csv-btn:hover {
  background-color: #2ecc71;
}
#chzzk-pdf-btn:hover {
  background-color: #e74c3c;
}
#chzzk-clear-btn:hover {
  background-color: #95a5a6;
}

/* 토스트 알림 스타일 */
.chzzk-toast-container {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 100000;
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: center;
  pointer-events: none;
}

.chzzk-toast {
  min-width: 250px;
  max-width: 400px;
  background-color: var(--Surface-Neutral-Base, rgba(0, 0, 0, 0.85));
  color: var(--Content-Neutral-Cool-Stronger, white);
  padding: 12px 20px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  font-size: 14px;
  font-family: inherit;
  text-align: center;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.3s ease, transform 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.chzzk-toast.show {
  opacity: 1;
  transform: translateY(0);
}

/* 아이콘 스타일 */
.chzzk-toast-icon {
  font-size: 18px;
}

/* 타입별 색상 포인트 */
.chzzk-toast.success {
  border-left: 4px solid #2ecc71;
}
.chzzk-toast.error {
  border-left: 4px solid #e74c3c;
}
.chzzk-toast.info {
  border-left: 4px solid #3498db;
}

/* 타겟 댓글 강조 효과 (2초간 노란색 깜빡임) */
@keyframes chzzk-target-blink {
  0% {
    background-color: rgba(255, 235, 59, 0);
    box-shadow: 0 0 0 0 rgba(255, 235, 59, 0);
  }
  50% {
    background-color: rgba(255, 235, 59, 0.3);
    box-shadow: 0 0 0 4px rgba(255, 235, 59, 0.3);
  }
  100% {
    background-color: rgba(255, 235, 59, 0);
    box-shadow: 0 0 0 0 rgba(255, 235, 59, 0);
  }
}

.chzzk-target-highlight {
  animation: chzzk-target-blink 2s ease-in-out 3; /* 3번 깜빡임 */
  border-radius: 8px;
  scroll-margin-top: 150px; /* 스크롤 시 헤더에 가려지지 않게 여백 확보 */
}

.chzzk-profile-uid > div {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--Content-Neutral-Cool-Strong);
  margin-bottom: 6px;
}
.chzzk-profile-uid > div > span:first-child {
  font-weight: bold;
  user-select: none;
}
.chzzk-profile-uid > div > span:last-child {
  cursor: pointer;
}
.chzzk-uid-copy-target {
  position: relative;
  padding: 2px 6px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s ease-in;
}
.chzzk-uid-copy-target:hover {
  background-color: var(--Surface-Interaction-Lighten-Hovered);
}
.chzzk-uid-copy-target:hover .chzzk-tooltip-text {
  visibility: visible;
  opacity: 1;
}
.chzzk-uid-copy-target .chzzk-tooltip-text {
  min-width: 80px;
  bottom: 140%;
}

/* 댓글 박스 자체를 숨기는 클래스 */
.chzzk-hidden-comment {
  display: none !important;
}

/* 차단 숨기기 스위치 스타일 */
.chzzk-toggle-label {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 14px;
  font-weight: bold;
  color: #f5f5f5;
  background-color: rgba(149, 165, 166, 0.75);
  padding: 8px 12px;
  border-radius: 20px;
  cursor: pointer;
  backdrop-filter: blur(1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  user-select: none;
  margin-bottom: 5px;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}
/* 체크박스 아예 숨기기 */
.chzzk-toggle-checkbox {
  display: none;
}
/* 켜졌을 때(Checked) 스타일 */
.chzzk-toggle-label.checked {
  background-color: #e74c3c;
  color: white;
  font-weight: bold;
  box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
}
.chzzk-toggle-label:hover {
  filter: brightness(1.2);
}

/* 클립 오버레이 자동 숨김/표시 기능 */
/* 1. 클립 정보(클릭하여 라이브 시청)를 기본적으로 숨김 */
[class*="FloatingButtonView-module__wrap"] {
  opacity: 0 !important;
  transition: opacity 0.2s ease !important;
  pointer-events: none !important;
}
/* 2. 뷰어 영역(비디오 포함)에 마우스가 올라가면(hover) 다시 표시 */
[class*="ContentViewerView-module__viewer"]:hover
  [class*="FloatingButtonView-module__wrap"] {
  opacity: 1 !important;
  pointer-events: auto !important;
}
/* 1. 네비게이션 레이어(화살표)를 기본적으로 숨김 */
[class*="NavigationLayerView-module__layer"] {
  opacity: 0 !important;
  transition: opacity 0.2s ease !important;
  pointer-events: none !important;
}
/* 2. 조건부 표시 로직 */
/* 조건 A: AppView(부모)가 '호버된 뷰어(ContentViewer)'를 가지고 있을 때 */
[class*="AppView-module__wrap"]:has([class*="ContentViewerView-module__viewer"]:hover) [class*="NavigationLayerView-module__layer"],
/* 조건 B: 또는 마우스가 이미 화살표(NavigationLayer) 위에 올라가 있을 때 (클릭하려는데 사라짐 방지) */
[class*="NavigationLayerView-module__layer"]:hover {
  opacity: 1 !important;
  pointer-events: auto !important;
}

/* 팔로잉탭 라이브 정렬 필터 셀렉트박스 높이 조정 */
[class*="navigation_component_filter"]
  [class*="selectbox_container"]
  button#live-order[aria-controls="selectbox-listbox"] {
  height: 28px;
}

.chzzk-chat-manage-wrapper {
  position: relative;
}
.chzzk-chat-manage-btn {
  align-items: center;
  border-radius: 4px;
  display: flex;
  font-size: 15px;
  font-weight: 500;
  gap: 0 20px;
  height: 36px;
  padding: 0 8px;
  white-space: nowrap;
  width: 100%;
}
.chzzk-chat-manage-btn:hover {
  background-color: rgba(var(--Content-Neutral-Primary-rgb), 0.05);
}
.chzzk-chat-manage-contents {
  align-items: center;
  color: var(--Content-Neutral-Cool-Stronger);
  display: flex;
  gap: 0 8px;
}
.chzzk-chat-manage-contents:only-child {
  padding-right: 4px;
}
.chzzk-chat-manage-contents svg {
  color: var(--Content-Neutral-Cool-Base);
  flex: none;
}

.chzzk-chat-block-btn {
  align-items: center;
  border-radius: 4px;
  color: var(--color-content-02);
  display: flex;
  font-size: 15px;
  font-weight: 500;
  gap: 0 6px;
  height: 36px;
  padding: 0 4px;
  position: relative;
  white-space: nowrap;
  width: 100%;
}
.chzzk-chat-block-btn:hover {
  background-color: var(--color-bg-overlay-03);
}
.chzzk-chat-block-btn svg {
  color: var(--color-content-04);
}
